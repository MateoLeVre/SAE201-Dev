<UserControl x:Class="AppliNicolas.Pages.RechercheDemande"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="Beige">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20" HorizontalAlignment="Center">

            <!-- Titre -->
            <TextBlock Text="Recherche de demandes"
                       FontSize="32"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,20" />

            <!-- Recherche -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,20" Height="40">
                <Border Background="#FFE5B4" CornerRadius="10" Padding="10" Width="1000" Height="40">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="🔍" VerticalAlignment="Center" FontSize="18" Margin="0,0,10,0"/>
                        <Border BorderBrush="Black" BorderThickness="1,1,1,1">
                        <TextBox x:Name="TxtRecherche"
                                 Width="900"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 FontSize="16"
                                 TextChanged="TxtRecherche_TextChanged"/>
                        </Border>
                    </StackPanel>
                </Border>

                <Button Content="Filtrer"
                        Style="{StaticResource BoutonArrondi}"
                        Width="100"
                        Height="40"
                        Margin="10,0,0,0"
                        Click="Filtrer_Click"/>
            </StackPanel>

            <StackPanel HorizontalAlignment="Center">
                
            <!-- En tetes -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Date" Width="150" FontWeight="Bold" FontSize="16" />
                <TextBlock Text="Vin" Width="200" FontWeight="Bold" FontSize="16" />
                <TextBlock Text="Montant total" Width="150" FontWeight="Bold" FontSize="16" />
                <TextBlock Text="État" Width="150" FontWeight="Bold" FontSize="16" />
                <TextBlock Text="Action" Width="200" FontWeight="Bold" FontSize="16" />
            </StackPanel>

            <!-- Liste des demandes -->
            <ItemsControl x:Name="IC_Demandes" ItemsSource="{Binding DemandesFiltres}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="{Binding DateDemande, StringFormat='dd/MM/yyyy'}" Width="150" FontSize="14" Margin="-1,0,0,0"/>
                            <Button Style="{StaticResource BoutonArrondi}" Content="{Binding Vin.Nom}" Width="200" FontSize="14" Tag="{Binding Vin}" Click="VoirFiche_Click" Margin="-30,0,30,0" />
                            <TextBlock Text="{Binding MontantTotal, StringFormat='{}{0:N2} €'}" Width="150" FontSize="14"/>
                                <TextBlock Text="{Binding EtatDemandeToString}" Width="150" FontSize="14"/>
                            <Button Content="Voir la demande" Width="150" Style="{StaticResource BoutonArrondi}" Tag="{Binding}" Click="VoirDemande_Click"/>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
